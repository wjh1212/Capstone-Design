part2

티처블 머신을 사용하여 얼굴을 인식하고 예측도를 측정하였다.

영상 캡쳐 기능을 확인하여 한사람당 대략 100장 정도의 사진을 캡쳐하였다.

티처블 머신 기능을 활용하여 얼굴을 학습시킨다
![캡쳐4](https://github.com/wjh1212/Capstone-Design/assets/103232862/bb19c920-f0f2-441a-86d6-d6f26ddff68b)

그리고 영상처리 코드를 짜서 코드를 실행 시킨다
![캡쳐5](https://github.com/wjh1212/Capstone-Design/assets/103232862/bc454a20-d5bf-4841-b1cc-f7a660843e29)

 다음은 영상처리에 대한 결과이다

![캡쳐1](https://github.com/wjh1212/Capstone-Design/assets/103232862/5bccb113-c6c1-4828-866d-decc491c14bf)



 전부다 85퍼 이상의 확률이 나온다.

![캡쳐2](https://github.com/wjh1212/Capstone-Design/assets/103232862/95e801cb-aaf7-48b4-8413-4e26f79bd660)

이것도 85퍼 이상의 확률이 나온다

![캡쳐3](https://github.com/wjh1212/Capstone-Design/assets/103232862/5e259914-f8f9-49d6-b21b-4e5e374cff20)

인식되지 않은 사용자가 나오면 unknwon으로 나오게 된다.



# part3

사용기기 : 갤럭시 S22

IDE : Android 스튜디오

사용언어 :　Java

Node-red에서 상황 감지 시 (Yes라고 표시되면) 준비된 Web server(HTTP 또는 HTTPS를 통해 웹 브라우저에서 요청하는 HTML 문서나 오브젝트(이미지 파일 등)을 전송해주는 서비스 프로그램) 로 접속하며 Web server에 있는 PHP 코드가 작동합니다. Google FCM Server를 통해서 Push Message 송신하면 스마트폰 어플리케이션이 Push Message 수신 받아서 지정된 번호로 전화 발신을 해줍니다.


![image](https://github.com/wjh1212/Capstone-Design/assets/103232862/a993913d-8d8a-4a51-adb6-4a83847be658)





part3를 part1과 연결하기 위해 switch, function1, http request 노드를 추가로 연결하였습니다.


①  rp2040에 내장된 PDM 마이크에 yes라고 말했을 때 작동되게 하기 위해 switch노드를 사용하여 yes를 말하였을 때 연결된 http request노드가 작동합니다.

![image](https://github.com/wjh1212/Capstone-Design/assets/103232862/45d118ad-fe79-4b06-9ec2-5eab181d04cd)


② FCM Push Message 송신을 위해 http request 노드를 작성하였습니다. 이 노드를 통해 외부에 있는 별도의 웹 서버에 접속하게 되며, 지정된 경로에 위치한 FCM 푸시 메시지 송신 PHP 코드가 작동하게 됩니다. 
PHP 코드는 해당 주소에 있는 코드를 사용하였습니다. (https://archijude.tistory.com/281)

![image](https://github.com/wjh1212/Capstone-Design/assets/103232862/4d908185-e4d4-41be-85c5-104783ad0fbf)


③ No인 경우에는 아무 기능도, 역할도 없는 fuction 1로 넘겨서 아무 작동도 하지 않도록 하였습니다.


![image](https://github.com/wjh1212/Capstone-Design/assets/103232862/ae049f29-3ba1-4889-ac9b-2795062866ab)




④Google FCM Server를 통해서 Push Message 송신하면 스마트폰 어플리케이션이 Push Message 수신 받아서 지정된 번호로 전화 발신을 해줍니다.

